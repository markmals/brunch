---
import CalendarDays from 'astro-heroicons/solid/CalendarDays.astro';
import ChevronRight from 'astro-heroicons/solid/ChevronRight.astro';
import MapPin from 'astro-heroicons/solid/MapPin.astro';
import Plus from 'astro-heroicons/solid/Plus.astro';
import User from 'astro-heroicons/solid/User.astro';

import Card from './Card.astro';
import Map from './Map.astro';

const googleCalendarDownloadLink = `https://calendar.google.com/calendar/event?action=TEMPLATE&tmeid=Nm00OHVmNXY1OHUyMXUxYjhxZGlwaHVyMHUgbWFsc3Ryb21tYXJrQG0&tmsrc=malstrommark%40gmail.com`;

export interface Props {
    mapboxToken: string;
    mapLink: string;
}

let { mapboxToken, mapLink } = Astro.props;
---

<div class="flex flex-col gap-6">
    <Card>
        <div
            class="flex w-full flex-col gap-4 divide-y divide-gray-900/10 py-4 dark:divide-gray-100/5"
        >
            <div class="flex flex-row items-center gap-6 px-4 text-gray-500">
                <User class="h-5 w-5 text-gray-500" />
                <span>
                    Hosted by <strong class="text-black dark:text-gray-100">Mark</strong>
                </span>
            </div>
            <div class="flex flex-row items-center gap-6 px-4 pt-4 text-gray-500">
                <CalendarDays class="h-5 w-5 text-gray-500" />
                <span>
                    <strong class="text-black dark:text-gray-100">
                        Sunday, April 16<sup>th</sup>, 2023
                    </strong>
                    <span class="flex flex-row items-center gap-2">
                        <span
                            class="flex flex-row items-center gap-1 text-black dark:text-gray-100"
                        >
                            10:30 AM <ChevronRight class="h-3 w-3 text-gray-500" /> 1:00 PM
                        </span>
                        (2.5 hr)
                    </span>
                </span>
            </div>
            <div class="flex flex-col items-start">
                <div class="flex flex-row items-center gap-6 p-4 text-gray-500">
                    <MapPin class="h-5 w-5 text-gray-500" />
                    <span class="flex flex-col">
                        <a href={mapLink}>
                            <strong class="text-black hover:text-indigo-700 dark:text-gray-100">
                                1416 Berene Ave.
                            </strong>
                        </a>
                        <span>Austin, TX 78721</span>
                    </span>
                </div>
                <a class="ml-14 h-full w-10/12" href={mapLink}>
                    <Map token={mapboxToken} />
                </a>
            </div>
        </div>
    </Card>

    <a
        class="flex flex-row gap-6"
        href={googleCalendarDownloadLink}
        rel="noreferrer"
        target="_blank"
    >
        <!-- TODO: Download iCal event -->
        <button
            class="flex w-full flex-row items-center justify-center gap-2 bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-950 dark:text-gray-100 dark:ring-transparent dark:hover:bg-gray-950 sm:rounded-md sm:dark:bg-black sm:dark:ring-gray-900"
            type="button"
        >
            <Plus class="h-6 w-6 text-indigo-500" />
            Add to Calendar
        </button>
    </a>
</div>
